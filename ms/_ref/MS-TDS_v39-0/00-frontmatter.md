**\[MS-TDS\]:**

**Tabular Data Stream Protocol**

Intellectual Property Rights Notice for Open Specifications
Documentation

-   **Technical Documentation.** Microsoft publishes Open Specifications
    documentation ("this documentation") for protocols, file formats,
    data portability, computer languages, and standards support.
    Additionally, overview documents cover inter-protocol relationships
    and interactions.

-   **Copyrights**. This documentation is covered by Microsoft
    copyrights. Regardless of any other terms that are contained in the
    terms of use for the Microsoft website that hosts this
    documentation, you can make copies of it in order to develop
    implementations of the technologies that are described in this
    documentation and can distribute portions of it in your
    implementations that use these technologies or in your documentation
    as necessary to properly document the implementation. You can also
    distribute in your implementation, with or without modification, any
    schemas, IDLs, or code samples that are included in the
    documentation. This permission also applies to any documents that
    are referenced in the Open Specifications documentation.

-   **No Trade Secrets**. Microsoft does not claim any trade secret
    rights in this documentation.

-   **Patents**. Microsoft has patents that might cover your
    implementations of the technologies described in the Open
    Specifications documentation. Neither this notice nor Microsoft\'s
    delivery of this documentation grants any licenses under those
    patents or any other Microsoft patents. However, a given Open
    Specifications document might be covered by the Microsoft [Open
    Specifications
    Promise](https://go.microsoft.com/fwlink/?LinkId=214445) or the
    [Microsoft Community
    Promise](https://go.microsoft.com/fwlink/?LinkId=214448). If you
    would prefer a written license, or if the technologies described in
    this documentation are not covered by the Open Specifications
    Promise or Community Promise, as applicable, patent licenses are
    available by contacting <iplg@microsoft.com>.

-   **License Programs**. To see all of the protocols in scope under a
    specific license program and the associated patents, visit the
    [Patent Map](https://aka.ms/AA9ufj8).

-   **Trademarks**. The names of companies and products contained in
    this documentation might be covered by trademarks or similar
    intellectual property rights. This notice does not grant any
    licenses under those rights. For a list of Microsoft trademarks,
    visit
    [www.microsoft.com/trademarks](https://www.microsoft.com/trademarks).

-   **Fictitious Names**. The example companies, organizations,
    products, domain names, email addresses, logos, people, places, and
    events that are depicted in this documentation are fictitious. No
    association with any real company, organization, product, domain
    name, email address, logo, person, place, or event is intended or
    should be inferred.

**Reservation of Rights**. All other rights are reserved, and this
notice does not grant any rights other than as specifically described
above, whether by implication, estoppel, or otherwise.

**Tools**. The Open Specifications documentation does not require the
use of Microsoft programming tools or programming environments in order
for you to develop an implementation. If you have access to Microsoft
programming tools and environments, you are free to take advantage of
them. Certain Open Specifications documents are intended for use in
conjunction with publicly available standards specifications and network
programming art and, as such, assume that the reader either is familiar
with the aforementioned material or has immediate access to it.

**Support.** For questions and support, please contact
<dochelp@microsoft.com>.

**Revision Summary**

  ----------------------------------------------------------------------------
  Date         Revision    Revision    Comments
               History     Class       
  ------------ ----------- ----------- ---------------------------------------
  3/14/2008    0.1         Major       Initial Availability.

  6/20/2008    0.1.1       Editorial   Changed language and formatting in the
                                       technical content.

  7/25/2008    0.1.2       Editorial   Changed language and formatting in the
                                       technical content.

  8/29/2008    0.1.3       Editorial   Changed language and formatting in the
                                       technical content.

  10/24/2008   0.1.4       Editorial   Changed language and formatting in the
                                       technical content.

  12/5/2008    0.2         Minor       Clarified the meaning of the technical
                                       content.

  1/16/2009    0.3         Minor       Clarified the meaning of the technical
                                       content.

  2/27/2009    0.4         Minor       Clarified the meaning of the technical
                                       content.

  4/10/2009    0.5         Minor       Clarified the meaning of the technical
                                       content.

  5/22/2009    0.5.1       Editorial   Changed language and formatting in the
                                       technical content.

  7/2/2009     1.0         Major       Updated and revised the technical
                                       content.

  8/14/2009    1.1         Minor       Clarified the meaning of the technical
                                       content.

  9/25/2009    2.0         Major       Updated and revised the technical
                                       content.

  11/6/2009    3.0         Major       Updated and revised the technical
                                       content.

  12/18/2009   4.0         Major       Updated and revised the technical
                                       content.

  1/29/2010    4.1         Minor       Clarified the meaning of the technical
                                       content.

  3/12/2010    5.0         Major       Updated and revised the technical
                                       content.

  4/23/2010    6.0         Major       Updated and revised the technical
                                       content.

  6/4/2010     7.0         Major       Updated and revised the technical
                                       content.

  7/16/2010    8.0         Major       Updated and revised the technical
                                       content.

  8/27/2010    8.0         None        No changes to the meaning, language, or
                                       formatting of the technical content.

  10/8/2010    9.0         Major       Updated and revised the technical
                                       content.

  11/19/2010   9.0         None        No changes to the meaning, language, or
                                       formatting of the technical content.

  1/7/2011     9.1         Minor       Clarified the meaning of the technical
                                       content.

  2/11/2011    9.2         Minor       Clarified the meaning of the technical
                                       content.

  3/25/2011    9.3         Minor       Clarified the meaning of the technical
                                       content.

  5/6/2011     9.4         Minor       Clarified the meaning of the technical
                                       content.

  6/17/2011    10.0        Major       Updated and revised the technical
                                       content.

  9/23/2011    11.0        Major       Updated and revised the technical
                                       content.

  12/16/2011   12.0        Major       Updated and revised the technical
                                       content.

  3/30/2012    12.1        Minor       Clarified the meaning of the technical
                                       content.

  7/12/2012    12.2        Minor       Clarified the meaning of the technical
                                       content.

  10/25/2012   12.2        None        No changes to the meaning, language, or
                                       formatting of the technical content.

  1/31/2013    13.0        Major       Updated and revised the technical
                                       content.

  8/8/2013     14.0        Major       Updated and revised the technical
                                       content.

  11/14/2013   15.0        Major       Updated and revised the technical
                                       content.

  2/13/2014    16.0        Major       Updated and revised the technical
                                       content.

  5/15/2014    17.0        Major       Updated and revised the technical
                                       content.

  6/30/2015    18.0        Major       Significantly changed the technical
                                       content.

  10/16/2015   19.0        Major       Significantly changed the technical
                                       content.

  5/10/2016    19.0        None        No changes to the meaning, language, or
                                       formatting of the technical content.

  7/14/2016    19.0        None        No changes to the meaning, language, or
                                       formatting of the technical content.

  3/16/2017    20.0        Major       Significantly changed the technical
                                       content.

  6/1/2017     20.0        None        No changes to the meaning, language, or
                                       formatting of the technical content.

  8/16/2017    21.0        Major       Significantly changed the technical
                                       content.

  9/15/2017    22.0        Major       Significantly changed the technical
                                       content.

  12/1/2017    23.0        Major       Significantly changed the technical
                                       content.

  3/16/2018    24.0        Major       Significantly changed the technical
                                       content.

  9/12/2018    25.0        Major       Significantly changed the technical
                                       content.

  3/13/2019    26.0        Major       Significantly changed the technical
                                       content.

  10/16/2019   27.0        Major       Significantly changed the technical
                                       content.

  11/1/2019    28.0        Major       Significantly changed the technical
                                       content.

  6/15/2020    29.0        Major       Significantly changed the technical
                                       content.

  10/1/2020    30.0        Major       Significantly changed the technical
                                       content.

  6/3/2021     31.0        Major       Significantly changed the technical
                                       content.

  7/16/2021    32.0        Major       Significantly changed the technical
                                       content.

  11/1/2022    33.0        Major       Significantly changed the technical
                                       content.

  12/20/2022   33.0        None        No changes to the meaning, language, or
                                       formatting of the technical content.

  4/10/2023    34.0        Major       Significantly changed the technical
                                       content.

  5/14/2024    35.0        Major       Significantly changed the technical
                                       content.

  9/18/2024    36.0        Major       Significantly changed the technical
                                       content.

  11/19/2024   37.0        Major       Significantly changed the technical
                                       content.

  8/29/2025    38.0        Major       Significantly changed the technical
                                       content.

  10/31/2025   39.0        Major       Significantly changed the technical
                                       content.
  ----------------------------------------------------------------------------

Table of Contents

[1 Introduction [9](#introduction)](#introduction)

[1.1 Glossary [9](#glossary)](#glossary)

[1.2 References [11](#references)](#references)

[1.2.1 Normative References
[11](#normative-references)](#normative-references)

[1.2.2 Informative References
[12](#informative-references)](#informative-references)

[1.3 Overview [14](#overview)](#overview)

[1.4 Relationship to Other Protocols
[16](#relationship-to-other-protocols)](#relationship-to-other-protocols)

[1.5 Prerequisites/Preconditions
[16](#prerequisitespreconditions)](#prerequisitespreconditions)

[1.6 Applicability Statement
[17](#applicability-statement)](#applicability-statement)

[1.7 Versioning and Capability Negotiation
[17](#versioning-and-capability-negotiation)](#versioning-and-capability-negotiation)

[1.8 Vendor-Extensible Fields
[18](#vendor-extensible-fields)](#vendor-extensible-fields)

[1.9 Standards Assignments
[18](#standards-assignments)](#standards-assignments)

[2 Messages [19](#messages)](#messages)

[2.1 Transport [19](#transport)](#transport)

[2.2 Message Syntax [19](#message-syntax)](#message-syntax)

[2.2.1 Client Messages [19](#client-messages)](#client-messages)

[2.2.1.1 Pre-Login [20](#pre-login)](#pre-login)

[2.2.1.2 Login [20](#login)](#login)

[2.2.1.3 Federated Authentication Token
[20](#federated-authentication-token)](#federated-authentication-token)

[2.2.1.4 SQL Batch [20](#sql-batch)](#sql-batch)

[2.2.1.5 Bulk Load [20](#bulk-load)](#bulk-load)

[2.2.1.6 Remote Procedure Call
[21](#remote-procedure-call)](#remote-procedure-call)

[2.2.1.7 Attention [21](#attention)](#attention)

[2.2.1.8 Transaction Manager Request
[21](#transaction-manager-request)](#transaction-manager-request)

[2.2.2 Server Messages [21](#server-messages)](#server-messages)

[2.2.2.1 Pre-Login Response
[22](#pre-login-response)](#pre-login-response)

[2.2.2.2 Login Response [22](#login-response)](#login-response)

[2.2.2.3 Federated Authentication Information
[22](#federated-authentication-information)](#federated-authentication-information)

[2.2.2.4 Row Data [22](#row-data)](#row-data)

[2.2.2.5 Return Status [22](#return-status)](#return-status)

[2.2.2.6 Return Parameters [23](#return-parameters)](#return-parameters)

[2.2.2.7 Response Completion
[23](#response-completion)](#response-completion)

[2.2.2.8 Error and Info [23](#error-and-info)](#error-and-info)

[2.2.2.9 Attention Acknowledgment
[23](#attention-acknowledgment)](#attention-acknowledgment)

[2.2.3 Packets [23](#packets)](#packets)

[2.2.3.1 Packet Header [24](#packet-header)](#packet-header)

[2.2.3.1.1 Type [24](#type)](#type)

[2.2.3.1.2 Status [25](#status)](#status)

[2.2.3.1.3 Length [26](#length)](#length)

[2.2.3.1.4 SPID [26](#spid)](#spid)

[2.2.3.1.5 PacketID [26](#packetid)](#packetid)

[2.2.3.1.6 Window [26](#window)](#window)

[2.2.3.2 Packet Data [26](#packet-data)](#packet-data)

[2.2.4 Packet Data Token and Tokenless Data Streams
[27](#packet-data-token-and-tokenless-data-streams)](#packet-data-token-and-tokenless-data-streams)

[2.2.4.1 Tokenless Stream [28](#tokenless-stream)](#tokenless-stream)

[2.2.4.2 Token Stream [28](#token-stream)](#token-stream)

[2.2.4.2.1 Token Definition [28](#token-definition)](#token-definition)

[2.2.4.2.1.1 Zero Length Token(xx01xxxx)
[28](#zero-length-tokenxx01xxxx)](#zero-length-tokenxx01xxxx)

[2.2.4.2.1.2 Fixed Length Token(xx11xxxx)
[28](#fixed-length-tokenxx11xxxx)](#fixed-length-tokenxx11xxxx)

[2.2.4.2.1.3 Variable Length Tokens(xx10xxxx)
[29](#variable-length-tokensxx10xxxx)](#variable-length-tokensxx10xxxx)

[2.2.4.2.1.4 Variable Count Tokens(xx00xxxx)
[29](#variable-count-tokensxx00xxxx)](#variable-count-tokensxx00xxxx)

[2.2.4.3 Done and Attention Tokens
[29](#done-and-attention-tokens)](#done-and-attention-tokens)

[2.2.5 Grammar Definition for Token Description
[30](#grammar-definition-for-token-description)](#grammar-definition-for-token-description)

[2.2.5.1 General Rules [30](#general-rules)](#general-rules)

[2.2.5.1.1 Least Significant Bit Order
[32](#least-significant-bit-order)](#least-significant-bit-order)

[2.2.5.1.2 Collation Rule Definition
[32](#collation-rule-definition)](#collation-rule-definition)

[2.2.5.2 Data Stream Types [33](#data-stream-types)](#data-stream-types)

[2.2.5.2.1 Unknown Length Data Streams
[33](#unknown-length-data-streams)](#unknown-length-data-streams)

[2.2.5.2.2 Variable-Length Data Streams
[33](#variable-length-data-streams)](#variable-length-data-streams)

[2.2.5.2.3 Data Type Dependent Data Streams
[34](#data-type-dependent-data-streams)](#data-type-dependent-data-streams)

[2.2.5.3 Packet Data Stream Headers - ALL_HEADERS Rule Definition
[35](#packet-data-stream-headers---all_headers-rule-definition)](#packet-data-stream-headers---all_headers-rule-definition)

[2.2.5.3.1 Query Notifications Header
[36](#query-notifications-header)](#query-notifications-header)

[2.2.5.3.2 Transaction Descriptor Header
[37](#transaction-descriptor-header)](#transaction-descriptor-header)

[2.2.5.3.3 Trace Activity Header
[37](#trace-activity-header)](#trace-activity-header)

[2.2.5.4 Data Type Definitions
[37](#data-type-definitions)](#data-type-definitions)

[2.2.5.4.1 Zero-Length Data Types
[37](#zero-length-data-types)](#zero-length-data-types)

[2.2.5.4.2 Fixed-Length Data Types
[38](#fixed-length-data-types)](#fixed-length-data-types)

[2.2.5.4.3 Variable-Length Data Types
[38](#variable-length-data-types)](#variable-length-data-types)

[2.2.5.4.4 Partially Length-Prefixed Data Types
[41](#partially-length-prefixed-data-types)](#partially-length-prefixed-data-types)

[2.2.5.5 Data Type Details [42](#data-type-details)](#data-type-details)

[2.2.5.5.1 System Data Type Values
[42](#system-data-type-values)](#system-data-type-values)

[2.2.5.5.1.1 Integers [42](#integers)](#integers)

[2.2.5.5.1.2 Time Stamps [42](#time-stamps)](#time-stamps)

[2.2.5.5.1.3 Character and Binary Strings
[42](#character-and-binary-strings)](#character-and-binary-strings)

[2.2.5.5.1.4 Fixed-Point Numbers
[42](#fixed-point-numbers)](#fixed-point-numbers)

[2.2.5.5.1.5 Floating-Point Numbers
[43](#floating-point-numbers)](#floating-point-numbers)

[2.2.5.5.1.6 Decimals and Numerics
[43](#decimals-and-numerics)](#decimals-and-numerics)

[2.2.5.5.1.7 GUIDs [43](#guids)](#guids)

[2.2.5.5.1.8 Dates and Times [43](#dates-and-times)](#dates-and-times)

[2.2.5.5.2 Common Language Runtime (CLR) Instances
[44](#common-language-runtime-clr-instances)](#common-language-runtime-clr-instances)

[2.2.5.5.3 XML Values [44](#xml-values)](#xml-values)

[2.2.5.5.4 sql_variant Values
[45](#sql_variant-values)](#sql_variant-values)

[2.2.5.5.5 Table Valued Parameter (TVP) Values
[46](#table-valued-parameter-tvp-values)](#table-valued-parameter-tvp-values)

[2.2.5.5.5.1 Metadata [46](#metadata)](#metadata)

[2.2.5.5.5.2 Optional Metadata Tokens
[48](#optional-metadata-tokens)](#optional-metadata-tokens)

[2.2.5.5.5.3 TDS Type Restrictions
[50](#tds-type-restrictions)](#tds-type-restrictions)

[2.2.5.5.6 JSON Values [51](#json-values)](#json-values)

[2.2.5.5.7 Vector Values [51](#vector-values)](#vector-values)

[2.2.5.5.7.1 Layout Format [51](#layout-format)](#layout-format)

[2.2.5.5.7.2 Layout Version [52](#layout-version)](#layout-version)

[2.2.5.5.7.3 Number of Dimensions
[52](#number-of-dimensions)](#number-of-dimensions)

[2.2.5.5.7.3.1 Implementation Note
[52](#implementation-note)](#implementation-note)

[2.2.5.5.7.4 Dimension Type [52](#dimension-type)](#dimension-type)

[2.2.5.5.7.5 Reserved [52](#reserved)](#reserved)

[2.2.5.5.7.6 Stream of Values
[52](#stream-of-values)](#stream-of-values)

[2.2.5.6 Type Info Rule Definition
[52](#type-info-rule-definition)](#type-info-rule-definition)

[2.2.5.7 Encryption Key Rule Definition
[53](#encryption-key-rule-definition)](#encryption-key-rule-definition)

[2.2.5.8 Data Packet Stream Tokens
[54](#data-packet-stream-tokens)](#data-packet-stream-tokens)

[2.2.6 Packet Header Message Type Stream Definition
[55](#packet-header-message-type-stream-definition)](#packet-header-message-type-stream-definition)

[2.2.6.1 Bulk Load BCP [55](#bulk-load-bcp)](#bulk-load-bcp)

[2.2.6.2 Bulk Load Update Text/Write Text
[56](#bulk-load-update-textwrite-text)](#bulk-load-update-textwrite-text)

[2.2.6.3 Federated Authentication Token
[56](#federated-authentication-token-1)](#federated-authentication-token-1)

[2.2.6.4 LOGIN7 [57](#login7)](#login7)

[2.2.6.5 PRELOGIN [71](#prelogin)](#prelogin)

[2.2.6.6 RPC Request [76](#rpc-request)](#rpc-request)

[2.2.6.7 SQLBatch [79](#sqlbatch)](#sqlbatch)

[2.2.6.8 SSPI Message [80](#sspi-message)](#sspi-message)

[2.2.6.9 Transaction Manager Request
[81](#transaction-manager-request-1)](#transaction-manager-request-1)

[2.2.7 Packet Data Token Stream Definition
[85](#packet-data-token-stream-definition)](#packet-data-token-stream-definition)

[2.2.7.1 ALTMETADATA [85](#altmetadata)](#altmetadata)

[2.2.7.2 ALTROW [87](#altrow)](#altrow)

[2.2.7.3 COLINFO [88](#colinfo)](#colinfo)

[2.2.7.4 COLMETADATA [89](#colmetadata)](#colmetadata)

[2.2.7.5 DATACLASSIFICATION
[93](#dataclassification)](#dataclassification)

[2.2.7.6 DONE [95](#done)](#done)

[2.2.7.7 DONEINPROC [96](#doneinproc)](#doneinproc)

[2.2.7.8 DONEPROC [97](#doneproc)](#doneproc)

[2.2.7.9 ENVCHANGE [99](#envchange)](#envchange)

[2.2.7.10 ERROR [103](#error)](#error)

[2.2.7.11 FEATUREEXTACK [105](#featureextack)](#featureextack)

[2.2.7.12 FEDAUTHINFO [111](#fedauthinfo)](#fedauthinfo)

[2.2.7.13 INFO [112](#info)](#info)

[2.2.7.14 LOGINACK [113](#loginack)](#loginack)

[2.2.7.15 NBCROW [114](#nbcrow)](#nbcrow)

[2.2.7.16 OFFSET [116](#offset)](#offset)

[2.2.7.17 ORDER [117](#order)](#order)

[2.2.7.18 RETURNSTATUS [117](#returnstatus)](#returnstatus)

[2.2.7.19 RETURNVALUE [118](#returnvalue)](#returnvalue)

[2.2.7.20 ROW [121](#row)](#row)

[2.2.7.21 SESSIONSTATE [122](#sessionstate)](#sessionstate)

[2.2.7.22 SSPI [123](#sspi)](#sspi)

[2.2.7.23 TABNAME [124](#tabname)](#tabname)

[2.2.7.24 TVP_ROW [125](#tvp_row)](#tvp_row)

[3 Protocol Details [127](#protocol-details)](#protocol-details)

[3.1 Common Details [127](#common-details)](#common-details)

[3.1.1 Abstract Data Model
[127](#abstract-data-model)](#abstract-data-model)

[3.1.2 Timers [127](#timers)](#timers)

[3.1.3 Initialization [127](#initialization)](#initialization)

[3.1.4 Higher-Layer Triggered Events
[127](#higher-layer-triggered-events)](#higher-layer-triggered-events)

[3.1.5 Message Processing Events and Sequencing Rules
[127](#message-processing-events-and-sequencing-rules)](#message-processing-events-and-sequencing-rules)

[3.1.6 Timer Events [134](#timer-events)](#timer-events)

[3.1.7 Other Local Events
[134](#other-local-events)](#other-local-events)

[3.2 Client Details [135](#client-details)](#client-details)

[3.2.1 Abstract Data Model
[136](#abstract-data-model-1)](#abstract-data-model-1)

[3.2.2 Timers [137](#timers-1)](#timers-1)

[3.2.3 Initialization [137](#initialization-1)](#initialization-1)

[3.2.4 Higher-Layer Triggered Events
[138](#higher-layer-triggered-events-1)](#higher-layer-triggered-events-1)

[3.2.5 Message Processing Events and Sequencing Rules
[139](#message-processing-events-and-sequencing-rules-1)](#message-processing-events-and-sequencing-rules-1)

[3.2.5.1 Sent Initial TLS Negotiation Packet State
[139](#sent-initial-tls-negotiation-packet-state)](#sent-initial-tls-negotiation-packet-state)

[3.2.5.2 Sent Initial PRELOGIN Packet State
[139](#sent-initial-prelogin-packet-state)](#sent-initial-prelogin-packet-state)

[3.2.5.3 Sent TLS/SSL Negotiation Packet State
[140](#sent-tlsssl-negotiation-packet-state)](#sent-tlsssl-negotiation-packet-state)

[3.2.5.4 Sent LOGIN7 Record with Complete Authentication Token State
[141](#sent-login7-record-with-complete-authentication-token-state)](#sent-login7-record-with-complete-authentication-token-state)

[3.2.5.5 Sent LOGIN7 Record with SPNEGO Packet State
[142](#sent-login7-record-with-spnego-packet-state)](#sent-login7-record-with-spnego-packet-state)

[3.2.5.6 Sent LOGIN7 Record with Federated Authentication Information
Request State
[142](#sent-login7-record-with-federated-authentication-information-request-state)](#sent-login7-record-with-federated-authentication-information-request-state)

[3.2.5.7 Logged In State [142](#logged-in-state)](#logged-in-state)

[3.2.5.8 Sent Client Request State
[143](#sent-client-request-state)](#sent-client-request-state)

[3.2.5.9 Sent Attention State
[143](#sent-attention-state)](#sent-attention-state)

[3.2.5.10 Routing Completed State
[143](#routing-completed-state)](#routing-completed-state)

[3.2.5.11 Final State [143](#final-state)](#final-state)

[3.2.6 Timer Events [144](#timer-events-1)](#timer-events-1)

[3.2.7 Other Local Events
[144](#other-local-events-1)](#other-local-events-1)

[3.3 Server Details [144](#server-details)](#server-details)

[3.3.1 Abstract Data Model
[146](#abstract-data-model-2)](#abstract-data-model-2)

[3.3.2 Timers [147](#timers-2)](#timers-2)

[3.3.3 Initialization [147](#initialization-2)](#initialization-2)

[3.3.4 Higher-Layer Triggered Events
[147](#higher-layer-triggered-events-2)](#higher-layer-triggered-events-2)

[3.3.5 Message Processing Events and Sequencing Rules
[147](#message-processing-events-and-sequencing-rules-2)](#message-processing-events-and-sequencing-rules-2)

[3.3.5.1 Initial State [148](#initial-state)](#initial-state)

[3.3.5.2 TLS/SSL Negotiation State
[148](#tlsssl-negotiation-state)](#tlsssl-negotiation-state)

[3.3.5.3 TLS Negotiation State
[148](#tls-negotiation-state)](#tls-negotiation-state)

[3.3.5.4 PRELOGIN Ready State
[149](#prelogin-ready-state)](#prelogin-ready-state)

[3.3.5.5 Login Ready State
[149](#login-ready-state)](#login-ready-state)

[3.3.5.6 SPNEGO Negotiation State
[151](#spnego-negotiation-state)](#spnego-negotiation-state)

[3.3.5.7 Federated Authentication Ready State
[151](#federated-authentication-ready-state)](#federated-authentication-ready-state)

[3.3.5.8 Logged In State [152](#logged-in-state-1)](#logged-in-state-1)

[3.3.5.9 Client Request Execution State
[152](#client-request-execution-state)](#client-request-execution-state)

[3.3.5.10 Routing Completed State
[152](#routing-completed-state-1)](#routing-completed-state-1)

[3.3.5.11 Final State [153](#final-state-1)](#final-state-1)

[3.3.6 Timer Events [153](#timer-events-2)](#timer-events-2)

[3.3.7 Other Local Events
[153](#other-local-events-2)](#other-local-events-2)

[4 Protocol Examples [154](#protocol-examples)](#protocol-examples)

[4.1 Pre-Login Request [154](#pre-login-request)](#pre-login-request)

[4.2 Login Request [155](#login-request)](#login-request)

[4.3 Login Request with Federated Authentication
[157](#login-request-with-federated-authentication)](#login-request-with-federated-authentication)

[4.4 Login Response [164](#login-response-1)](#login-response-1)

[4.5 Login Response with Federated Authentication Feature Extension
Acknowledgement
[168](#login-response-with-federated-authentication-feature-extension-acknowledgement)](#login-response-with-federated-authentication-feature-extension-acknowledgement)

[4.6 SQL Batch Client Request
[174](#sql-batch-client-request)](#sql-batch-client-request)

[4.7 SQL Batch Server Response
[175](#sql-batch-server-response)](#sql-batch-server-response)

[4.8 RPC Client Request [176](#rpc-client-request)](#rpc-client-request)

[4.9 RPC Server Response
[178](#rpc-server-response)](#rpc-server-response)

[4.10 Attention Request [179](#attention-request)](#attention-request)

[4.11 SSPI Message [179](#sspi-message-1)](#sspi-message-1)

[4.12 Bulk Load [180](#bulk-load-1)](#bulk-load-1)

[4.13 Transaction Manager Request
[181](#transaction-manager-request-2)](#transaction-manager-request-2)

[4.14 TVP Insert Statement
[182](#tvp-insert-statement)](#tvp-insert-statement)

[4.15 SparseColumn Select Statement
[185](#sparsecolumn-select-statement)](#sparsecolumn-select-statement)

[4.16 FeatureExt with SESSIONRECOVERY Feature Data
[190](#featureext-with-sessionrecovery-feature-data)](#featureext-with-sessionrecovery-feature-data)

[4.17 FeatureExtAck with SESSIONRECOVERY Feature Data
[195](#featureextack-with-sessionrecovery-feature-data)](#featureextack-with-sessionrecovery-feature-data)

[4.18 Table Response with SESSIONSTATE Token Data
[201](#table-response-with-sessionstate-token-data)](#table-response-with-sessionstate-token-data)

[4.19 Token Stream Communication
[203](#token-stream-communication)](#token-stream-communication)

[4.19.1 Sending a SQL Batch
[203](#sending-a-sql-batch)](#sending-a-sql-batch)

[4.19.2 Out-of-Band Attention Signal
[203](#out-of-band-attention-signal)](#out-of-band-attention-signal)

[4.20 FeatureExt with AZURESQLSUPPORT Feature Data
[204](#featureext-with-azuresqlsupport-feature-data)](#featureext-with-azuresqlsupport-feature-data)

[4.21 FeatureExtAck with AZURESQLSUPPORT Feature Data
[207](#featureextack-with-azuresqlsupport-feature-data)](#featureextack-with-azuresqlsupport-feature-data)

[5 Security [217](#security)](#security)

[5.1 Security Considerations for Implementers
[217](#security-considerations-for-implementers)](#security-considerations-for-implementers)

[5.2 Index of Security Parameters
[217](#index-of-security-parameters)](#index-of-security-parameters)

[6 Appendix A: Product Behavior
[219](#appendix-a-product-behavior)](#appendix-a-product-behavior)

[7 Change Tracking [227](#change-tracking)](#change-tracking)

[8 Index [228](#index)](#index)

